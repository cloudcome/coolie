/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.9.0
 * @license MIT
 */
!function(){"use strict";var e,n="0.9.0",t=function(){return(new Date).getTime()},r=0,i=window,o=i.document,u={},a=[],c=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===c(e)},f=function(e){return"function"===c(e)},l=function(e){return"string"===c(e)},d=function(e,n,t){var r,i;if(s(e))for(r=t?e.length-1:0,i=t?0:e.length;(t?r>i:i>r)&&n(r,e[r])!==!1;t?r--:r++);else if("object"==typeof e)for(r in e)if(n(r,e[r])===!1)break},p=function(){var e={},n=i.console,t=["log","warn","group","groupEnd"];return d(t,function(t,r){e[r]=function(){if(u.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),e}(),g=/\/[^/]+$/,v=function(e,n){return e=e.replace(b,""),"/"===e?e:g.test(e)?n?e+"/":e.replace(g,"/"):e},m=/^\/|((http|ftp)s?:\/\/)/,h=/^(\.{1,2})\//,w=/(\/[^/]+?)?\/$/,_=function(e,n){if(!n||m.test(n))return n;var t;for(n="./"+n;t=n.match(h);)n=n.replace(h,""),2===t[1].length&&(e=e.replace(w,"/"));return e+n},y=function(e,n){return(n||o).getElementsByTagName(e)},x=/[\?#].*?$/,b=/^(ftp|file|https?):\/\/[^\/]*/,A=/\.js($|\?)/i,j=function(e,n){return e=e.replace(x,""),n?e:(w.test(e)&&(e+="index"),e+(A.test(e)?"":".js"))},$=function(e){return j(e.hasAttribute?e.src:e.getAttribute("src",4))},q=function(e,n){return e.getAttribute("data-"+n)},E=/loaded|complete/,S=o.head||y("head",o)[0],k=y("base",S)[0],C=/\.[^.]*$/,T=function(e){if(!u._v)return e;var n=l(u._v)?u._v:u._v[e];return n?e.replace(C,"."+n+"$&"):e},L=null,B=function(n,t){var r=T(n),u=o.createElement("script"),a=!1,c=function(e){if(!a){if(a=!0,e&&"error"===e.type)throw"load script error\n"+r;t!==!0&&(L=u,dn(u)),S.removeChild(u),u=null}};u.src=r,u.id=n,u.async=!0,u.defer=!0,u.onload!==e?u.onload=u.onerror=c:u.onreadystatechange=function(e){E.test(u.readyState)&&(e=e||i.event,c(e))},k?S.insertBefore(u,k):S.appendChild(u)},M=function(e){var n,t=T(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!n){if(n=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+t;pn({_isAn:U._isAn,id:e,url:t,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",t),r.send(null)},D=function(e){pn({_isAn:U._isAn,id:e,url:T(e),deps:[],factory:function(){return e}})},G=function(){var e=y("script");return e[e.length-1]},H=G(),N=function(e){return(e.match(b)||[])[0]},O=$(H),R=N(O),X=q(H,"config"),z=q(H,"main"),F=v(O),I=X?_(F,X):null,J=X?v(I):null,K=X?_(R,I):null,P=function(){if(!X)return null;var e=N(K);return e?e:(e=R,K=e+K,e)}(),Q=J,U={},V={};V.version=n;var W=!1,Y={},Z=[],en={},nn=1,tn=0;V.config=function(e){var n=G(),t=$(n);if(O!==t&&(Q=J=v(t),P=N(t)),u=e,Q=_(J,v(u.base,!0)),u.version=u.version||{},l(u.version)?u._v=u.version:(u._v={},d(u.version,function(e,n){u._v[P+_(Q,e)]=n})),z){var r=U.url=j(P+_(Q,z));U._defined=!1,Y[r]=U}return e.debug=e.debug!==!1,V},V.use=function(e){return W?V:(W=!0,r=t(),e&&(U.url=P+_(Q,e),Y[U.url]=U),U.url?(B(U.url),p.group("coolie modules"),V):V)},V.callback=function(e){return U._executed&&f(e)?(e.call(V,U.exports),V):(f(e)&&a.push(e),V)};var rn=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,on=/\\\\/g,un=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,an=function(e){return fn.test(e)?{name:j(e.replace(fn,""),!0),type:"text"}:ln.test(e)?{name:j(e.replace(ln,""),!0),type:"image"}:{name:j(e),type:"js"}},cn={image:"image",text:"text",html:"text",css:"text"},sn=function(e){var n=[];return e.replace(on,"").replace(rn,function(e,t,r){if(r){var i,o=r.match(un);i=o[2]?{name:j(o[1],!0),type:cn[o[2].toLowerCase()]}:an(o[1]),n.push(i)}}),n},fn=/^(css|html|text)!/i,ln=/^(image)!/i,dn=function(e){var n=!0,t=Z.shift(),r=t[0],i=t[1],o=t[2],u=e.id,a=$(e),c=v(u);f(t[2])?n=!1:f(t[1])?(r=null,i=[],o=t[1]):f(t[0])&&(o=t[0],i=sn(o.toString()),r=null),r=U._defined&&U._isAn?u:r||u;var s={_isAn:n,_path:c,_node:e,id:r,url:a,deps:i,factory:o};U.id||(n||(Y[r]=Y[U.url]),s._isMain=!0,U=s,U._defined=!0);var p=[];d(i,function(e,n){if(l(n)&&(n={id:n}),U._isAn){var t=_(c,n.name);n.id=j(P+t,"js"!==n.type)}if(r===n.id)throw"required myself: \n"+r;if(en[n.id]&&d(en[n.id].deps,function(e,n){if(n===r)throw"required circle: \n"+n+"\n"+r}),!Y[n.id]&&(p.push(n.id),Y[n.id]=!0,nn++,U._isAn))switch(n.type){case"text":M(n.id);break;case"image":D(n.id);break;default:B(n.id)}}),s.deps=p,pn(s),Z.length&&dn(L)},pn=function(e){e.exports={},e._execute=function(){var n=function(n,t){var r;if(U._isAn&&(r=t?{name:n,type:t}:an(n),n=P+j(_(e._path,r.name),"js"!==r.type)),!en[n])throw"can not found module \n"+n+"\nbut required in\n"+e.id;return en[n]._execute()};return function(){var t=e.id;return e._executed?en[t].exports:(e._executed=!0,en[t].exports=e.factory.call(window,n,e.exports,e)||e.exports,en[t].exports)}}(),en[e.id]=e,tn++,p.log("module "+e.id),Z.length||tn!==nn||(p.log("past "+(t()-r)+"ms"),p.groupEnd("coolie modules"),U._execute(),d(a,function(e,n){n.call(V,U.exports)}))},gn=function(e,n,t){Z.push([e,n,t])};X&&B(K,!0),window.coolie=V,window.coolie.modules=en,window.coolie.configs=u,window.coolie.each=d,window.define=gn,window.define.amd={},window.define.cmd={}}();