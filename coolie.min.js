/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.14.0
 * @license MIT
 */
(function(){"use strict";var e=this;if(!e.coolie){var n="image",t="json",r="text",o="js",i="src",u="script",c="coolie modules",a={};a.version="0.14.0";var s,f=function(){return(new Date).getTime()},l=0,d=e.document,p={},v=[],h=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},g=function(e){return"array"===h(e)},_=function(e){return"function"===h(e)},m=function(e){return"string"===h(e)},y=function(e,n,t){var r,o;if(g(e))for(r=t?e.length-1:0,o=t?0:e.length;(t?r>o:o>r)&&n(r,e[r])!==!1;t?r--:r++);else if("object"==typeof e)for(r in e)if(n(r,e[r])===!1)break},b=function(e,n){for(var t in e)if(!n[t])return!1;return!0},x=function(){var n={},t=e.console,r=["log","warn","group","groupEnd"];return y(r,function(e,r){n[r]=function(){if(p.debug&&t&&t[r])try{t[r].apply(t,arguments)}catch(e){}}}),n}(),w=/\/[^/]+$/,A=/^((ftp|file|https?):)?\/\/[^\/]*/,j=/^\/\//,S=function(e,n){return e=e.replace(A,""),"/"===e?e:w.test(e)?n?e+"/":e.replace(w,"/"):e},E=/^\/|((http|ftp)s?:\/\/)/,$=/^(\.{1,2})\//,q=/(\/[^/]+?)?\/$/,k=function(e,n){if(!n||E.test(n))return n;var t;for(n="./"+n;t=n.match($);)n=n.replace($,""),2===t[1].length&&(e=e.replace(q,"/"));return e+n},C=function(e,n){return(n||d).getElementsByTagName(e)},L=/[\?#].*?$/,T=/\.js($|\?)/i,D=function(e,n){return e=e.replace(L,""),n?e:(q.test(e)&&(e+="index"),e+(T.test(e)?"":"."+o))},J=function(e){return D(e.hasAttribute?e.src:e.getAttribute(i,4))},R=function(e,n){return e.getAttribute("data-"+n)},U=function(e,n){var t=d.createElement(e);return y(n,function(e,n){t[e]=n}),t},B=function(e,n){(n||N||M).appendChild(e)},G=function(e,n){try{e.remove()}catch(t){try{(n||d).removeChild(e)}catch(t){}}},H=/loaded|complete/,M=d.documentElement,N=d.body,O=U("div",{id:c+f()});B(O);var P=/\.[^.]*$/,F=function(e){if(!p._v)return e;var n=m(p._v)?p._v:p._v[e];return n?(e+=P.test(e)?"":".js",e.replace(P,"."+n+"$&")):e},X=null,z=function(n,t){var r=F(n),o=U(u,{src:r+(p.cache===!1?"?_="+f():""),id:n,async:!0}),i=!1,c=function(e){if(!i){if(i=!0,e&&"error"===e.type)throw"load script error\n"+r;t!==!0&&(X=o,wn(o))}};o.onload!==s?o.onload=o.onerror=c:o.onreadystatechange=function(n){H.test(o.readyState)&&(n=n||e.event,c(n))},B(o,O)},I=function(e,n){var t={};try{t=JSON.parse(n)}catch(r){try{var o=new Function("","return "+n);t=o()}catch(i){throw"parse json error "+e}}return t},K=function(e,n){var r,o=F(e),i=new XMLHttpRequest,u=function(){if(4===i.readyState&&!r){if(r=!0,200!==i.status&&304!==i.status)throw"ajax error\n"+o;An({_isAn:fn._isAn,id:e,url:o,deps:[],factory:function(){var r=i.responseText;return r&&n===t&&(r=I(e,r)),r}})}};i.onload=i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=u,i.open("GET",o),i.send(null)},Q=function(e){An({_isAn:fn._isAn,id:e,url:F(e),deps:[],factory:function(){return e}})},V=function(e){var n=C(u,e);return n[n.length-1]},W=V();B(W,O);var Y=function(e){return j.test(e)&&(e=location.protocol+e),(e.match(A)||[])[0]},Z=a.coolieJSURL=J(W),en=Y(Z),nn=R(W,"config"),tn=R(W,"main"),rn=S(Z),on=nn?k(rn,nn):null,un=nn?S(on):null,cn=nn?k(en,on):null,an=function(){if(!nn)return null;var e=Y(cn);return e?e:(e=en,cn=e+cn,e)}(),sn=un,fn={},ln=!1,dn={},pn=[],vn={},hn=1,gn=0;a.config=function(n){if(p=n,p.version=p.version||{},cn?sn=k(un,S(p.base,!0)):(an=Y(n.base),sn=S(n.base)),m(p.version)?p._v=p.version:(p._v={},y(p.version,function(e,n){p._v[an+k(sn,e)]=n})),tn){var t=fn.url=D(an+k(sn,tn));fn._dfn=!1,dn[t]=fn}return e.DEBUG=n.debug=n.debug!==!1,a},a.use=function(e){return ln?a:(ln=!0,l=f(),e&&(fn.url=an+k(sn,e),dn[fn.url]=fn),fn.url?(z(fn.url),x.group(c),a):a)},a.callback=function(e){return fn._exd&&_(e)?(e.call(a,fn.exports),a):(_(e)&&v.push(e),a)};var _n=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,mn=/\\\\/g,yn=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,bn={image:n,text:r,html:r,json:t,css:r},xn=function(e){var n=[];return e.replace(mn,"").replace(_n,function(e,t,r){if(r){var i=r.match(yn),u={name:D(i[1],!!i[2]),type:i[2]?bn[i[2].toLowerCase()]:o};n.push(u)}}),n},wn=function(e){var i=!0,u=pn.shift();if(u){var c=u[0],a=u[1],s=u[2],f=e.id,l=J(e),d=S(f);_(u[2])?i=!1:_(u[1])?(c=null,a=[],s=u[1]):_(u[0])&&(s=u[0],a=xn(s.toString()),c=null),c=fn._dfn&&fn._isAn?f:c||f;var p={_isAn:i,_path:d,_node:e,id:c,url:l,deps:a,factory:s};fn.id||(i||(dn[c]=dn[fn.url],delete dn[fn.url]),p._isMain=!0,fn=p,fn._dfn=!0);var v=[];y(a,function(e,i){if(m(i)&&(i={id:i}),fn._isAn){var u=k(d,i.name);i.id=D(an+u,i.type!==o)}if(c===i.id)throw"required myself: \n"+c;if(vn[i.id]&&y(vn[i.id].deps,function(e,n){if(n===c)throw"required circle: \n"+n+"\n"+c}),!dn[i.id]&&(v.push(i.id),dn[i.id]=!0,hn++,fn._isAn))switch(i.type){case r:case t:K(i.id,i.type);break;case n:Q(i.id);break;default:z(i.id)}}),p.deps=v,An(p),pn.length&&X&&wn(X)}},An=function(n){n.exports={},n._exe=function(){var t=function(e,t){var r;if(fn._isAn&&(r={name:e,type:t||o},e=an+D(k(n._path,r.name),r.type!==o)),!vn[e])throw"can not found module \n"+e+"\nbut required in\n"+n.id;return vn[e]._exe()};return function(){var r=n.id;return n._exd?vn[r].exports:(n._exd=!0,vn[r].exports=n.factory.call(e,t,n.exports,n)||n.exports,vn[r].exports)}}(),vn[n.id]=n,gn++,x.log(n.id),!pn.length&&gn>=hn&&b(dn,vn)&&!fn._exd&&(p.debug===!1&&G(O,N),x.log("past "+(f()-l)+"ms"),x.groupEnd(c),fn._exe(),y(v,function(e,n){n.call(a,fn.exports)}))},jn=function(e,n,t){pn.push([e,n,t])};nn&&z(cn,!0),e.coolie=a,e.coolie.modules=vn,e.coolie.each=y,e.coolie.getHost=Y,e.coolie.getPathJoin=k,e.coolie.getPathDir=S,e.coolie.getCurrentScript=V,e.coolie.getScriptURL=J,e.coolie.script=W,e.coolie.chunk=function(e){e=g(e)?e:[e],y(e,function(e,n){z(en+k(sn,n))})},e.define=jn,e.define.amd={},e.define.cmd={}}}).call(this);