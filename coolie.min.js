/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.1.5
 * @license MIT
 */
!function(){"use strict";function e(e,s){var a,c,l,d={};2===arguments.length?(l=e,d._isAnonymous=!1,d._id=s,d._type="ajax",d._path=i(s),d._deps=[],d._factory=function(e,n,o){o.exports=l.responseText||"",l=null},n(d),R[d._id]=d,O[d._id]={}):G.length&&(c=e,a=G.shift(),d._isAnonymous=""===a[0],d._id=a[0]||c.id,d._type=a[0]?"local":"script",c=null,d._path=d._isAnonymous?i(d._id):"",d._deps=a[1],d._factory=a[2],n(d),R[d._id]=d,O[d._id]={},d._deps.length&&f(d._deps,function(e,n){var o=n.replace(j,""),i=d._isAnonymous?u(d._path,o):o;if(O[i]&&O[i][d._id])throw"module `"+d._id+"` and module `"+i+"` make up a circular dependency relationship";d._deps[e]=i,O[d._id][i]=1,H.push({id:i,by:d._id}),O[i]||(O[i]={},j.test(n)?r(i):t(i))})),S===B&&!G.length&&g&&R[g]&&(f(H,function(e,n){if(!O[n.id])throw"can not found module `"+n.id+"`, but module `"+n.by+"` dependence on it"}),o(g),O=null,G=null,H=null)}function n(e){e.exports={},e._exec=function(){var n=function(n){n=n.replace(j,"");var o=e._isAnonymous?u(i(e._id),n):n;if(!R[o])throw"can not found module `"+o+"`, require in `"+e._id+"`";return R[o]._exec()};return function(){var o=e._id;return e._hasExport?R[o].exports:(e._factory.call(window,n,e.exports,e),e._hasExport=!0,R[o].exports=e.exports)}}()}function o(e){if(!R[e])throw"can not found module `"+e+"`";console.log("past "+(Date.now()-y)+" ms"),console.groupEnd("coolie modules"),R[e]._exec()}function t(n){var o,t,r=s(n),i=Date.now();return S++,r?(o=document.createElement("script"),t=function(t){"error"===t.type?console.groupEnd("coolie modules"):(console.log("script module",n,Date.now()-i+"ms"),B++,e(o)),$.removeChild(o)},o.id=n,o.async=!0,o.defer=!0,o.src=p(n),o.onload=o.onerror=t,void $.appendChild(o)):setTimeout(function(){console.log("local module",n,Date.now()-i+"ms"),B++,e()},1)}function r(n){S++;var o=new XMLHttpRequest,t=Date.now(),r=function(){if(200!==o.status&&304!==o.status)throw"can not ajax "+n+", response status is "+o.status;console.log("text module",n,Date.now()-t+"ms"),B++,e(o,n)};o.onload=o.onerror=o.onabort=o.ontimeout=r,o.open("GET",n),o.send(null)}function i(e){return e.replace(A,"/")}function s(e){return(e.replace(j,"").replace(T,"").match(D)||[""])[0]}function u(e,n){var o=(e.match(T)||[""])[0],t=s(e),r=s(n),i=0,u=e.replace(T,""),a=n;switch(t||(u="./"+u),"/"!==u.slice(-1)&&(u+="/"),r||(a="./"+a,r="./"),r){case"./":return o+u+a.slice(2);case"../":for(i=a.match(E).length;i-->0;){if(!q.test(u))throw"can not change path from `"+e+"` to `"+n+"`";u=u.replace(q,"")}return o+u+a.replace(E,"");default:return o+a}}function a(e){var n=[];return e.replace(x,"").replace(v,function(e,o,t){t&&n.push(t)}),n}function c(e){return e&&e instanceof Array}function l(e){return"function"==typeof e}function d(e){return"string"==typeof e}function f(e,n){var o,t;if(c(e))for(o=0,t=e.length;t>o&&n(o,e[o])!==!1;o++);else if("object"==typeof e)for(o in e)if(e.hasOwnProperty(o)&&n(o,e[o])===!1)break}function p(e){return N.version?e+(e.indexOf("?")>-1?"&":"?")+"_="+encodeURIComponent(N.version):e}function m(){var e=document.getElementsByTagName("script");return e[e.length-1]}function h(e){return e.dataset?e.dataset.main:e.getAttribute("data-main")}var _,w,g,y,b="0.1.4",v=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,x=/\\\\/g,E=/\.\.\//g,A=/\/([^\/]+)$/,D=/^.*?\//,q=/[^\/]+\/$/,T=/^.*\/\/[^\/]*/,j=/^(css|html|text)!/i,C=m(),$=C.parentNode,k=location.protocol+"//"+location.host+i(u(i(location.pathname),C.getAttribute("src"))),M=h(C),N={base:k},O={},R={},S=0,B=0,G=[],H=[];window.define=function(e,n,o){var t=arguments,r=1===t.length;if(g||(r?g=_:(w=g=e,O={},O[w]={})),r)o=t[0],e="";else{if(!d(e))throw new Error("module id must be a string");if(l(t[1])&&(o=t[1],n=[]),!c(n))throw new Error("module defineModules must be an array")}if(!l(o))throw new Error("module factory must be a function");n=r?a(o.toString()):n,G.push([e,n,o])},window.coolie={version:b,modules:R,config:function(e){return e=e||{},N.base=e.base?u(k,e.base):k,N.version=e.version,this},use:function(e){if(_)throw new Error("can not  execute `coolie.use` twice more");if(!d(N.base))throw new Error("coolie config `base` property must be a string");if(e&&!d(e))throw new Error("main module must be a string");return M&&M!==e&&(e&&console.warn("attribute main is `"+M+"`, but use main is `"+e+"`"),e=M),_=u(N.base,e),y=Date.now(),console.group("coolie modules"),t(_),this}}}();