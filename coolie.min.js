/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.9.0
 * @license MIT
 */
!function(){"use strict";var e,t="0.8.3",n=function(){return(new Date).getTime()},r=0,i=window,o=i.document,u={},c=[],a=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===a(e)},f=function(e){return"function"===a(e)},d=function(e){return"string"===a(e)},l=function(e,t,n){var r,i;if(s(e))for(r=n?e.length-1:0,i=n?0:e.length;(n?r>i:i>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},p=function(){var e={},t=i.console,n=["log","warn","group","groupEnd"];return l(n,function(n,r){e[r]=function(){if(u.debug&&t&&t[r])try{t[r].apply(t,arguments)}catch(e){}}}),e}(),g=/\/[^/]+$/,m=function(e,t){return e=e.replace(b,""),"/"===e?e:g.test(e)?t?e+"/":e.replace(g,"/"):e},v=/^\/|((http|ftp)s?:\/\/)/,h=/^(\.{1,2})\//,w=/(\/[^/]+?)?\/$/,_=function(e,t){if(!t||v.test(t))return t;var n;for(t="./"+t;n=t.match(h);)t=t.replace(h,""),2===n[1].length&&(e=e.replace(w,"/"));return e+t},y=function(e,t){return(t||o).getElementsByTagName(e)},x=/[\?#].*?$/,b=/^(ftp|file|https?):\/\/[^\/]*/,A=/\.js($|\?)/i,j=function(e,t){return e=e.replace(x,""),t?e:(w.test(e)&&(e+="index"),e+(A.test(e)?"":".js"))},$=function(e){return j(e.hasAttribute?e.src:e.getAttribute("src",4))},q=function(e,t){return e.getAttribute("data-"+t)},E=/loaded|complete/,S=o.head||y("head",o)[0],k=y("base",S)[0],C=/\.[^.]*$/,T=function(e){if(!u._v)return e;var t=d(u._v)?u._v:u._v[e];return t?e.replace(C,"."+t+"$&"):e},L=null,B=function(t,n){var r=T(t),u=o.createElement("script"),c=!1,a=function(e){if(!c){if(c=!0,e&&"error"===e.type)throw"load script error\n"+r;n!==!0&&(L=u,ft(u)),S.removeChild(u),u=null}};u.src=r,u.id=t,u.async=!0,u.defer=!0,u.onload!==e?u.onload=u.onerror=a:u.onreadystatechange=function(e){E.test(u.readyState)&&(e=e||i.event,a(e))},k?S.insertBefore(u,k):S.appendChild(u)},M=function(e){var t,n=T(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!t){if(t=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+n;dt({_isAn:Q._isAn,id:e,url:n,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",n),r.send(null)},D=function(e){dt({_isAn:Q._isAn,id:e,url:T(e),deps:[],factory:function(){return e}})},G=function(){var e=y("script");return e[e.length-1]}(),H=function(e){return(e.match(b)||[])[0]},N=$(G),O=H(N),R=q(G,"config"),X=q(G,"main"),z=m(N),F=_(z,R),I=m(F),J=_(O,F),K=function(){var e=H(J);return e?e:(e=O,J=e+J,e)}(),P=I,Q={},U={};U.version=t;var V=!1,W={},Y=[],Z={},et=1,tt=0;U.config=function(e){if(u=e,P=_(I,m(u.base,!0)),u.version=u.version||{},d(u.version)?u._v=u.version:(u._v={},l(u.version,function(e,t){u._v[K+_(P,e)]=t})),X){var t=Q.url=j(K+_(P,X));Q._defined=!1,W[t]=Q}return e.debug=e.debug!==!1,U},U.use=function(e){return V?U:(V=!0,r=n(),e&&(Q.url=K+_(P,e),W[Q.url]=Q),Q.url?(B(Q.url),p.group("coolie modules"),U):U)},U.callback=function(e){return Q._executed&&f(e)?(e.call(U,Q.exports),U):(f(e)&&c.push(e),U)};var nt=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,rt=/\\\\/g,it=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,ot=function(e){return at.test(e)?{name:j(e.replace(at,""),!0),type:"text"}:st.test(e)?{name:j(e.replace(st,""),!0),type:"image"}:{name:j(e),type:"js"}},ut={image:"image",text:"text",html:"text",css:"text"},ct=function(e){var t=[];return e.replace(rt,"").replace(nt,function(e,n,r){if(r){var i,o=r.match(it);i=o[2]?{name:j(o[1],!0),type:ut[o[2].toLowerCase()]}:ot(o[1]),t.push(i)}}),t},at=/^(css|html|text)!/i,st=/^(image)!/i,ft=function(e){var t=!0,n=Y.shift(),r=n[0],i=n[1],o=n[2],u=e.id,c=$(e),a=m(u);f(n[2])?t=!1:f(n[1])?(r=null,i=[],o=n[1]):f(n[0])&&(o=n[0],i=ct(o.toString()),r=null),r=Q._defined&&Q._isAn?u:r||u;var s={_isAn:t,_path:a,_node:e,id:r,url:c,deps:i,factory:o};Q.id||(t||(W[r]=W[Q.url]),s._isMain=!0,Q=s,Q._defined=!0);var p=[];l(i,function(e,t){if(d(t)&&(t={id:t}),Q._isAn){var n=_(a,t.name);t.id=j(K+n,"js"!==t.type)}if(r===t.id)throw"required myself: \n"+r;if(Z[t.id]&&l(Z[t.id].deps,function(e,t){if(t===r)throw"required circle: \n"+t+"\n"+r}),!W[t.id]&&(p.push(t.id),W[t.id]=!0,et++,Q._isAn))switch(t.type){case"text":M(t.id);break;case"image":D(t.id);break;default:B(t.id)}}),s.deps=p,dt(s),Y.length&&ft(L)},dt=function(e){e.exports={},e._execute=function(){var t=function(t,n){var r;if(Q._isAn&&(r=n?{name:t,type:n}:ot(t),t=K+j(_(e._path,r.name),"js"!==r.type)),!Z[t])throw"can not found module \n"+t+"\nbut required in\n"+e.id;return Z[t]._execute()};return function(){var n=e.id;return e._executed?Z[n].exports:(e._executed=!0,Z[n].exports=e.factory.call(window,t,e.exports,e)||e.exports,Z[n].exports)}}(),Z[e.id]=e,tt++,p.log("module "+e.id),Y.length||tt!==et||(p.log("past "+(n()-r)+"ms"),p.groupEnd("coolie modules"),Q._execute(),l(c,function(e,t){t.call(U,Q.exports)}))},lt=function(e,t,n){Y.push([e,t,n])};R&&B(J,!0),window.coolie=U,window.coolie.modules=Z,window.coolie.configs=u,window.coolie.each=l,window.define=lt,window.define.amd={},window.define.cmd={}}();