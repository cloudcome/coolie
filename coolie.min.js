/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.13.2
 * @license MIT
 */
(function(){"use strict";var e=this;if(!e.coolie){var t="image",n="json",r="text",o="js",i="src",u="script",c={};c.version="0.13.2";var a,s=function(){return(new Date).getTime()},l=0,f=e.document,d={},p=[],v=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},h=function(e){return"array"===v(e)},g=function(e){return"function"===v(e)},m=function(e){return"string"===v(e)},y=function(e,t,n){var r,o;if(h(e))for(r=n?e.length-1:0,o=n?0:e.length;(n?r>o:o>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},_=function(){var t={},n=e.console,r=["log","warn","group","groupEnd"];return y(r,function(e,r){t[r]=function(){if(d.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),t}(),b=/\/[^/]+$/,x=/^((ftp|file|https?):)?\/\/[^\/]*/,w=/^\/\//,A=function(e,t){return e=e.replace(x,""),"/"===e?e:b.test(e)?t?e+"/":e.replace(b,"/"):e},S=/^\/|((http|ftp)s?:\/\/)/,j=/^(\.{1,2})\//,$=/(\/[^/]+?)?\/$/,q=function(e,t){if(!t||S.test(t))return t;var n;for(t="./"+t;n=t.match(j);)t=t.replace(j,""),2===n[1].length&&(e=e.replace($,"/"));return e+t},E=function(e,t){return(t||f).getElementsByTagName(e)},C=/[\?#].*?$/,L=/\.js($|\?)/i,k=function(e,t){return e=e.replace(C,""),t?e:($.test(e)&&(e+="index"),e+(L.test(e)?"":"."+o))},T=function(e){return k(e.hasAttribute?e.src:e.getAttribute(i,4))},D=function(e,t){return e.getAttribute("data-"+t)},J=function(e,t){var n=f.createElement(e);return y(t,function(e,t){n[e]=t}),n},R=function(e,t){(t||G).appendChild(e)},U=function(e,t){try{e.remove()}catch(n){try{(t||f).removeChild(e)}catch(n){}}},B=/loaded|complete/,G=f.body||E("body",f)[0],H=J("div");R(H);var M=/\.[^.]*$/,N=function(e){if(!d._v)return e;var t=m(d._v)?d._v:d._v[e];return t?e.replace(M,"."+t+"$&"):e},O=null,P=function(t,n){var r=N(t),o=J(u,{src:r,id:t,async:!0,defer:!0}),i=!1,c=function(e){if(!i){if(i=!0,e&&"error"===e.type)throw"load script error\n"+r;n!==!0&&(O=o,_t(o)),o=null}};o.onload!==a?o.onload=o.onerror=c:o.onreadystatechange=function(t){B.test(o.readyState)&&(t=t||e.event,c(t))},R(o,H)},F=function(e,t){var n={};try{n=JSON.parse(t)}catch(r){try{var o=new Function("","return "+t);n=o()}catch(i){throw"parse json error "+e}}return n},X=function(e,t){var r,o=N(e),i=new XMLHttpRequest,u=function(){if(4===i.readyState&&!r){if(r=!0,200!==i.status&&304!==i.status)throw"ajax error\n"+o;bt({_isAn:ct._isAn,id:e,url:o,deps:[],factory:function(){var r=i.responseText;return r&&t===n&&(r=F(e,r)),r}})}};i.onload=i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=u,i.open("GET",o),i.send(null)},z=function(e){bt({_isAn:ct._isAn,id:e,url:N(e),deps:[],factory:function(){return e}})},I=function(e){var t=E(u,e);return t[t.length-1]},K=I();R(K,H);var Q=J(u,{src:K.src});R(Q);var V=function(e){return w.test(e)&&(e=location.protocol+e),(e.match(x)||[])[0]},W=c.coolieJSURL=T(K),Y=V(W),Z=D(K,"config"),et=D(K,"main"),tt=A(W),nt=Z?q(tt,Z):null,rt=Z?A(nt):null,ot=Z?q(Y,nt):null,it=function(){if(!Z)return null;var e=V(ot);return e?e:(e=Y,ot=e+ot,e)}(),ut=rt,ct={},at=!1,st={},lt=[],ft={},dt=1,pt=0;c.config=function(t){if(d=t,d.version=d.version||{},ot?ut=q(rt,A(d.base,!0)):(it=V(t.base),ut=A(t.base)),m(d.version)?d._v=d.version:(d._v={},y(d.version,function(e,t){d._v[it+q(ut,e)]=t})),et){var n=ct.url=k(it+q(ut,et));ct._dfn=!1,st[n]=ct}return e.DEBUG=t.debug=t.debug!==!1,c},c.use=function(e){return at?c:(at=!0,l=s(),e&&(ct.url=it+q(ut,e),st[ct.url]=ct),ct.url?(P(ct.url),_.group("coolie modules"),c):c)},c.callback=function(e){return ct._exd&&g(e)?(e.call(c,ct.exports),c):(g(e)&&p.push(e),c)};var vt=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,ht=/\\\\/g,gt=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,mt={image:t,text:r,html:r,json:n,css:r},yt=function(e){var t=[];return e.replace(ht,"").replace(vt,function(e,n,r){if(r){var i=r.match(gt),u={name:k(i[1],!!i[2]),type:i[2]?mt[i[2].toLowerCase()]:o};t.push(u)}}),t},_t=function(e){var i=!0,u=lt.shift(),c=u[0],a=u[1],s=u[2],l=e.id,f=T(e),d=A(l);g(u[2])?i=!1:g(u[1])?(c=null,a=[],s=u[1]):g(u[0])&&(s=u[0],a=yt(s.toString()),c=null),c=ct._dfn&&ct._isAn?l:c||l;var p={_isAn:i,_path:d,_node:e,id:c,url:f,deps:a,factory:s};ct.id||(i||(st[c]=st[ct.url]),p._isMain=!0,ct=p,ct._dfn=!0);var v=[];y(a,function(e,i){if(m(i)&&(i={id:i}),ct._isAn){var u=q(d,i.name);i.id=k(it+u,i.type!==o)}if(c===i.id)throw"required myself: \n"+c;if(ft[i.id]&&y(ft[i.id].deps,function(e,t){if(t===c)throw"required circle: \n"+t+"\n"+c}),!st[i.id]&&(v.push(i.id),st[i.id]=!0,dt++,ct._isAn))switch(i.type){case r:case n:X(i.id,i.type);break;case t:z(i.id);break;default:P(i.id)}}),p.deps=v,bt(p),lt.length&&_t(O)},bt=function(t){t.exports={},t._exe=function(){var n=function(e,n){var r;if(ct._isAn&&(r={name:e,type:n||o},e=it+k(q(t._path,r.name),r.type!==o)),!ft[e])throw"can not found module \n"+e+"\nbut required in\n"+t.id;return ft[e]._exe()};return function(){var r=t.id;return t._exd?ft[r].exports:(t._exd=!0,ft[r].exports=t.factory.call(e,n,t.exports,t)||t.exports,ft[r].exports)}}(),ft[t.id]=t,pt++,_.log("module "+t.id),lt.length||pt!==dt||(U(H,G),U(Q,G),_.log("past "+(s()-l)+"ms"),_.groupEnd("coolie modules"),ct._exe(),y(p,function(e,t){t.call(c,ct.exports)}))},xt=function(e,t,n){lt.push([e,t,n])};Z&&P(ot,!0),e.coolie=c,e.coolie.modules=ft,e.coolie.each=y,e.coolie.getHost=V,e.coolie.getPathJoin=q,e.coolie.getPathDir=A,e.coolie.getCurrentScript=I,e.coolie.getScriptURL=T,e.coolie.script=K,e.define=xt,e.define.amd={},e.define.cmd={}}}).call(this);