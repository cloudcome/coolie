/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.8.0
 * @license MIT
 */
!function(){"use strict";var e,n="0.8.0",t=function(){return(new Date).getTime()},r=0,i=window,o=i.document,u={},a=[],c=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===c(e)},d=function(e){return"function"===c(e)},f=function(e){return"string"===c(e)},l=function(e,n,t){var r,i;if(s(e))for(r=t?e.length-1:0,i=t?0:e.length;(t?r>i:i>r)&&n(r,e[r])!==!1;t?r--:r++);else if("object"==typeof e)for(r in e)if(n(r,e[r])===!1)break},p=function(){var e={},n=i.console,t=["log","warn","group","groupEnd"];return l(t,function(t,r){e[r]=function(){if(n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),e}(),h=/\/[^/]+$/,m=function(e,n){return e=e.replace(b,""),"/"===e?e:h.test(e)?n?e+"/":e.replace(h,"/"):e},v=/^\//,g=/^(\.{1,2})\//,w=/\/[^/]+?\/$/,_=function(e,n){if(!n||v.test(n))return n;var t;for(n="./"+n;t=n.match(g);)n=n.replace(g,""),2===t[1].length&&(e=e.replace(w,"/"));return e+n},y=function(e,n){return(n||o).getElementsByTagName(e)},x=/[\?#].*?$/,b=/https?:\/\/[^/]*/,A=/\.js($|\?)/i,j=function(e,n){return e=e.replace(x,""),n?e:(w.test(e)&&(e+="index"),e+(A.test(e)?"":".js"))},$=function(e){return j(e.hasAttribute?e.src:e.getAttribute("src",4))},q=function(e,n){return e.getAttribute("data-"+n)},E=/loaded|complete/,S=o.head||y("head",o)[0],k=y("base",S)[0],C=/\.[^.]*$/,T=function(e){if(!u._v)return e;var n=f(u._v)?u._v:u._v[e];return n?e.replace(C,"."+n+"$&"):e},L=null,B=function(n,t){var r=T(n),u=o.createElement("script"),a=!1,c=function(e){if(!a){if(a=!0,e&&"error"===e.type)throw"load script error\n"+r;t!==!0&&(L=u,cn(u)),S.removeChild(u),u=null}};u.src=r,u.id=n,u.async=!0,u.defer=!0,u.onload!==e?u.onload=u.onerror=c:u.onreadystatechange=function(e){E.test(u.readyState)&&(e=e||i.event,c(e))},k?S.insertBefore(u,k):S.appendChild(u)},M=function(e){var n,t=T(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!n){if(n=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+t;sn({_isAn:K._isAn,id:e,url:t,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",t),r.send(null)},D=function(e){sn({_isAn:K._isAn,id:e,url:T(e),deps:[],factory:function(){return e}})},G=function(){var e=y("script");return e[e.length-1]}(),H=$(G),N=H.match(b)[0],O=q(G,"config"),R=q(G,"main"),X=m(H),z=_(X,O),F=N+z,I={};I.version=n;var J=null,K={},P=!1,Q={},U=[],V={},W=1,Y=0;I.config=function(e){if(u=e,J=_(X,m(u.base,!0)),u.version=u.version||{},u.host&&(N=u.host),f(u.version)?u._v=u.version:(u._v={},l(u.version,function(e,n){u._v[N+_(J,e)]=n})),R){var n=K.url=j(N+_(J,R));K._defined=!1,Q[n]=K}return I},I.use=function(e){return P?I:(P=!0,r=t(),e&&(K.url=j(N+_(J,e)),Q[K.url]=K),K.url?(B(K.url),p.group("coolie modules"),I):I)},I.callback=function(e){return K._executed&&d(e)?(e.call(I,K.exports),I):(d(e)&&a.push(e),I)};var Z=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,en=/\\\\/g,nn=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,tn=function(e){return un.test(e)?{name:j(e.replace(un,""),!0),type:"text"}:an.test(e)?{name:j(e.replace(an,""),!0),type:"image"}:{name:j(e),type:"js"}},rn={image:"image",text:"text",html:"text",css:"text"},on=function(e){var n=[];return e.replace(en,"").replace(Z,function(e,t,r){if(r){var i,o=r.match(nn);i=o[2]?{name:j(o[1],!0),type:rn[o[2].toLowerCase()]}:tn(o[1]),n.push(i)}}),n},un=/^(css|html|text)!/i,an=/^(image)!/i,cn=function(e){var n=!0,t=U.shift(),r=t[0],i=t[1],o=t[2],u=e.id,a=$(e),c=m(u);d(t[2])?n=!1:d(t[1])?(r=null,i=[],o=t[1]):d(t[0])&&(o=t[0],i=on(o.toString()),r=null),r=K._defined&&K._isAn?u:r||u;var s={_isAn:n,_path:c,_node:e,id:r,url:a,deps:i,factory:o};K.id||(n||(Q[r]=Q[K.url]),s._isMain=!0,K=s,K._defined=!0);var p=[];l(i,function(e,n){if(f(n)&&(n={id:n}),K._isAn){var t=_(c,n.name);n.id=j(N+t,"js"!==n.type)}if(r===n.id)throw"required myself: \n"+r;if(V[n.id]&&l(V[n.id].deps,function(e,n){if(n===r)throw"required circle: \n"+n.id+"\n"+r}),!Q[n.id]&&(p.push(n.id),Q[n.id]=!0,W++,K._isAn))switch(n.type){case"text":M(n.id);break;case"image":D(n.id);break;default:B(n.id)}}),s.deps=p,sn(s),U.length&&cn(L)},sn=function(e){e.exports={},e._execute=function(){var n=function(n,t){var r;if(K._isAn&&(r=t?{name:n,type:t}:tn(n),n=N+j(_(e._path,r.name),"js"!==r.type)),!V[n])throw"can not found module \n"+n+"\nbut required in\n"+e.id;return V[n]._execute()};return function(){var t=e.id;return e._executed?V[t].exports:(e._executed=!0,V[t].exports=e.factory.call(window,n,e.exports,e)||e.exports,V[t].exports)}}(),V[e.id]=e,Y++,p.log("module "+e.id),U.length||Y!==W||(p.log("past "+(t()-r)+"ms"),p.groupEnd("coolie modules"),K._execute(),l(a,function(e,n){n.call(I,K.exports)}))},dn=function(e,n,t){U.push([e,n,t])};O&&B(F+"?"+t(),!0),window.coolie=I,window.coolie.modules=V,window.coolie.configs=u,window.coolie.each=l,window.define=dn,window.define.amd={},window.define.cmd={}}();