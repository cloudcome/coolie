/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.13.5
 * @license MIT
 */
(function(){"use strict";var e=this;if(!e.coolie){var t="image",n="json",r="text",o="js",i="src",u="script",c="coolie modules",a={};a.version="0.13.5";var s,f=function(){return(new Date).getTime()},l=0,d=e.document,p={},v=[],h=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},g=function(e){return"array"===h(e)},y=function(e){return"function"===h(e)},_=function(e){return"string"===h(e)},m=function(e,t,n){var r,o;if(g(e))for(r=n?e.length-1:0,o=n?0:e.length;(n?r>o:o>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},b=function(){var t={},n=e.console,r=["log","warn","group","groupEnd"];return m(r,function(e,r){t[r]=function(){if(p.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),t}(),x=/\/[^/]+$/,w=/^((ftp|file|https?):)?\/\/[^\/]*/,A=/^\/\//,S=function(e,t){return e=e.replace(w,""),"/"===e?e:x.test(e)?t?e+"/":e.replace(x,"/"):e},j=/^\/|((http|ftp)s?:\/\/)/,$=/^(\.{1,2})\//,q=/(\/[^/]+?)?\/$/,C=function(e,t){if(!t||j.test(t))return t;var n;for(t="./"+t;n=t.match($);)t=t.replace($,""),2===n[1].length&&(e=e.replace(q,"/"));return e+t},E=function(e,t){return(t||d).getElementsByTagName(e)},L=/[\?#].*?$/,k=/\.js($|\?)/i,T=function(e,t){return e=e.replace(L,""),t?e:(q.test(e)&&(e+="index"),e+(k.test(e)?"":"."+o))},D=function(e){return T(e.hasAttribute?e.src:e.getAttribute(i,4))},J=function(e,t){return e.getAttribute("data-"+t)},R=function(e,t){var n=d.createElement(e);return m(t,function(e,t){n[e]=t}),n},U=function(e,t){(t||H).appendChild(e)},B=function(e,t){try{e.remove()}catch(n){try{(t||d).removeChild(e)}catch(n){}}},G=/loaded|complete/,H=d.body||E("body",d)[0],M=R("div",{id:c+f()});U(M);var N=/\.[^.]*$/,O=function(e){if(!p._v)return e;var t=_(p._v)?p._v:p._v[e];return t?e.replace(N,"."+t+"$&"):e},P=function(t,n){var r=O(t),o=R(u,{src:r,id:t,async:!0}),i=!1,c=function(e){if(!i){if(i=!0,e&&"error"===e.type)throw"load script error\n"+r;n!==!0&&_t(o)}};o.onload!==s?o.onload=o.onerror=c:o.onreadystatechange=function(t){G.test(o.readyState)&&(t=t||e.event,c(t))},U(o,M)},F=function(e,t){var n={};try{n=JSON.parse(t)}catch(r){try{var o=new Function("","return "+t);n=o()}catch(i){throw"parse json error "+e}}return n},X=function(e,t){var r,o=O(e),i=new XMLHttpRequest,u=function(){if(4===i.readyState&&!r){if(r=!0,200!==i.status&&304!==i.status)throw"ajax error\n"+o;mt({_isAn:ut._isAn,id:e,url:o,deps:[],factory:function(){var r=i.responseText;return r&&t===n&&(r=F(e,r)),r}})}};i.onload=i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=u,i.open("GET",o),i.send(null)},z=function(e){mt({_isAn:ut._isAn,id:e,url:O(e),deps:[],factory:function(){return e}})},I=function(e){var t=E(u,e);return t[t.length-1]},K=I();U(K,M);var Q=function(e){return A.test(e)&&(e=location.protocol+e),(e.match(w)||[])[0]},V=a.coolieJSURL=D(K),W=Q(V),Y=J(K,"config"),Z=J(K,"main"),et=S(V),tt=Y?C(et,Y):null,nt=Y?S(tt):null,rt=Y?C(W,tt):null,ot=function(){if(!Y)return null;var e=Q(rt);return e?e:(e=W,rt=e+rt,e)}(),it=nt,ut={},ct=!1,at={},st=[],ft={},lt=1,dt=0;a.config=function(t){if(p=t,p.version=p.version||{},rt?it=C(nt,S(p.base,!0)):(ot=Q(t.base),it=S(t.base)),_(p.version)?p._v=p.version:(p._v={},m(p.version,function(e,t){p._v[ot+C(it,e)]=t})),Z){var n=ut.url=T(ot+C(it,Z));ut._dfn=!1,at[n]=ut}return e.DEBUG=t.debug=t.debug!==!1,a},a.use=function(e){return ct?a:(ct=!0,l=f(),e&&(ut.url=ot+C(it,e),at[ut.url]=ut),ut.url?(P(ut.url),b.group(c),a):a)},a.callback=function(e){return ut._exd&&y(e)?(e.call(a,ut.exports),a):(y(e)&&v.push(e),a)};var pt=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,vt=/\\\\/g,ht=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,gt={image:t,text:r,html:r,json:n,css:r},yt=function(e){var t=[];return e.replace(vt,"").replace(pt,function(e,n,r){if(r){var i=r.match(ht),u={name:T(i[1],!!i[2]),type:i[2]?gt[i[2].toLowerCase()]:o};t.push(u)}}),t},_t=function(e){var i=!0,u=st.shift();if(!u)return void b.log(e);var c=u[0],a=u[1],s=u[2],f=e.id,l=D(e),d=S(f);y(u[2])?i=!1:y(u[1])?(c=null,a=[],s=u[1]):y(u[0])&&(s=u[0],a=yt(s.toString()),c=null),c=ut._dfn&&ut._isAn?f:c||f;var p={_isAn:i,_path:d,_node:e,id:c,url:l,deps:a,factory:s};ut.id||(i||(at[c]=at[ut.url]),p._isMain=!0,ut=p,ut._dfn=!0);var v=[];m(a,function(e,i){if(_(i)&&(i={id:i}),ut._isAn){var u=C(d,i.name);i.id=T(ot+u,i.type!==o)}if(c===i.id)throw"required myself: \n"+c;if(ft[i.id]&&m(ft[i.id].deps,function(e,t){if(t===c)throw"required circle: \n"+t+"\n"+c}),!at[i.id]&&(v.push(i.id),at[i.id]=!0,lt++,ut._isAn))switch(i.type){case r:case n:X(i.id,i.type);break;case t:z(i.id);break;default:P(i.id)}}),p.deps=v,mt(p)},mt=function(t){t.exports={},t._exe=function(){var n=function(e,n){var r;if(ut._isAn&&(r={name:e,type:n||o},e=ot+T(C(t._path,r.name),r.type!==o)),!ft[e])throw"can not found module \n"+e+"\nbut required in\n"+t.id;return ft[e]._exe()};return function(){var r=t.id;return t._exd?ft[r].exports:(t._exd=!0,ft[r].exports=t.factory.call(e,n,t.exports,t)||t.exports,ft[r].exports)}}(),ft[t.id]=t,dt++,b.log(t.id),st.length||dt!==lt||(p.debug===!1&&(B(M,H),B($cloneCoolie,H)),b.log("past "+(f()-l)+"ms"),b.groupEnd(c),ut._exe(),m(v,function(e,t){t.call(a,ut.exports)}))},bt=function(e,t,n){st.push([e,t,n])};Y&&P(rt,!0),e.coolie=a,e.coolie.modules=ft,e.coolie.each=m,e.coolie.getHost=Q,e.coolie.getPathJoin=C,e.coolie.getPathDir=S,e.coolie.getCurrentScript=I,e.coolie.getScriptURL=D,e.coolie.script=K,e.define=bt,e.define.amd={},e.define.cmd={}}}).call(this);