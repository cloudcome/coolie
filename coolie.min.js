/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.11.0
 * @license MIT
 */
!function(e){"use strict";var t,n="0.11.0",r=function(){return(new Date).getTime()},i=0,o=e.document,u={},c=[],a=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===a(e)},f=function(e){return"function"===a(e)},l=function(e){return"string"===a(e)},d=function(e,t,n){var r,i;if(s(e))for(r=n?e.length-1:0,i=n?0:e.length;(n?r>i:i>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},p=function(){var t={},n=e.console,r=["log","warn","group","groupEnd"];return d(r,function(e,r){t[r]=function(){if(u.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),t}(),g=/\/[^/]+$/,v=/^((ftp|file|https?):)?\/\/[^\/]*/,h=/^\/\//,m=function(e,t){return e=e.replace(v,""),"/"===e?e:g.test(e)?t?e+"/":e.replace(g,"/"):e},_=/^\/|((http|ftp)s?:\/\/)/,y=/^(\.{1,2})\//,x=/(\/[^/]+?)?\/$/,b=function(e,t){if(!t||_.test(t))return t;var n;for(t="./"+t;n=t.match(y);)t=t.replace(y,""),2===n[1].length&&(e=e.replace(x,"/"));return e+t},A=function(e,t){return(t||o).getElementsByTagName(e)},w=/[\?#].*?$/,j=/\.js($|\?)/i,$=function(e,t){return e=e.replace(w,""),t?e:(x.test(e)&&(e+="index"),e+(j.test(e)?"":".js"))},q=function(e){return $(e.hasAttribute?e.src:e.getAttribute("src",4))},E=function(e,t){return e.getAttribute("data-"+t)},S=/loaded|complete/,k=o.head||A("head",o)[0],C=A("base",k)[0],T=/\.[^.]*$/,B=function(e){if(!u._v)return e;var t=l(u._v)?u._v:u._v[e];return t?e.replace(T,"."+t+"$&"):e},L=null,D=function(n,r){var i=B(n),u=o.createElement("script"),c=!1,a=function(e){if(!c){if(c=!0,e&&"error"===e.type)throw"load script error\n"+i;r!==!0&&(L=u,dt(u)),k.removeChild(u),u=null}};u.src=i,u.id=n,u.async=!0,u.defer=!0,u.onload!==t?u.onload=u.onerror=a:u.onreadystatechange=function(t){S.test(u.readyState)&&(t=t||e.event,a(t))},C?k.insertBefore(u,C):k.appendChild(u)},G=function(e){var t,n=B(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!t){if(t=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+n;pt({_isAn:V._isAn,id:e,url:n,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",n),r.send(null)},M=function(e){pt({_isAn:V._isAn,id:e,url:B(e),deps:[],factory:function(){return e}})},H=function(){var e=A("script");return e[e.length-1]},N=H(),O=function(e){return h.test(e)&&(e=location.protocol+e),(e.match(v)||[])[0]},R=q(N),U=O(R),X=E(N,"config"),z=E(N,"main"),F=m(R),I=X?b(F,X):null,J=X?m(I):null,K=X?b(U,I):null,P=function(){if(!X)return null;var e=O(K);return e?e:(e=U,K=e+K,e)}(),Q=J,V={},W={};W.version=n;var Y=!1,Z={},et=[],tt={},nt=1,rt=0;W.config=function(t){{var n=H();q(n)}if(u=t,Q=b(J,m(u.base,!0)),u.version=u.version||{},l(u.version)?u._v=u.version:(u._v={},d(u.version,function(e,t){u._v[P+b(Q,e)]=t})),z){var r=V.url=$(P+b(Q,z));V._dfn=!1,Z[r]=V}return e.DEBUG=t.debug=t.debug!==!1,W},W.use=function(e){return Y?W:(Y=!0,i=r(),e&&(V.url=P+b(Q,e),Z[V.url]=V),V.url?(D(V.url),p.group("coolie modules"),W):W)},W.callback=function(e){return V._executed&&f(e)?(e.call(W,V.exports),W):(f(e)&&c.push(e),W)};var it=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,ot=/\\\\/g,ut=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,ct=function(e){return ft.test(e)?{name:$(e.replace(ft,""),!0),type:"text"}:lt.test(e)?{name:$(e.replace(lt,""),!0),type:"image"}:{name:$(e),type:"js"}},at={image:"image",text:"text",html:"text",css:"text"},st=function(e){var t=[];return e.replace(ot,"").replace(it,function(e,n,r){if(r){var i,o=r.match(ut);i=o[2]?{name:$(o[1],!0),type:at[o[2].toLowerCase()]}:ct(o[1]),t.push(i)}}),t},ft=/^(css|html|text)!/i,lt=/^(image)!/i,dt=function(e){var t=!0,n=et.shift(),r=n[0],i=n[1],o=n[2],u=e.id,c=q(e),a=m(u);f(n[2])?t=!1:f(n[1])?(r=null,i=[],o=n[1]):f(n[0])&&(o=n[0],i=st(o.toString()),r=null),r=V._dfn&&V._isAn?u:r||u;var s={_isAn:t,_path:a,_node:e,id:r,url:c,deps:i,factory:o};V.id||(t||(Z[r]=Z[V.url]),s._isMain=!0,V=s,V._dfn=!0);var p=[];d(i,function(e,t){if(l(t)&&(t={id:t}),V._isAn){var n=b(a,t.name);t.id=$(P+n,"js"!==t.type)}if(r===t.id)throw"required myself: \n"+r;if(tt[t.id]&&d(tt[t.id].deps,function(e,t){if(t===r)throw"required circle: \n"+t+"\n"+r}),!Z[t.id]&&(p.push(t.id),Z[t.id]=!0,nt++,V._isAn))switch(t.type){case"text":G(t.id);break;case"image":M(t.id);break;default:D(t.id)}}),s.deps=p,pt(s),et.length&&dt(L)},pt=function(t){t.exports={},t._execute=function(){var n=function(e,n){var r;if(V._isAn&&(r=n?{name:e,type:n}:ct(e),e=P+$(b(t._path,r.name),"js"!==r.type)),!tt[e])throw"can not found module \n"+e+"\nbut required in\n"+t.id;return tt[e]._execute()};return function(){var r=t.id;return t._executed?tt[r].exports:(t._executed=!0,tt[r].exports=t.factory.call(e,n,t.exports,t)||t.exports,tt[r].exports)}}(),tt[t.id]=t,rt++,p.log("module "+t.id),et.length||rt!==nt||(p.log("past "+(r()-i)+"ms"),p.groupEnd("coolie modules"),V._execute(),d(c,function(e,t){t.call(W,V.exports)}))},gt=function(e,t,n){et.push([e,t,n])};X&&D(K,!0),e.coolie=W,e.coolie.modules=tt,e.coolie.configs=u,e.coolie.each=d,e.define=gt,e.define.amd={},e.define.cmd={}}(this);